generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "sqlite"
  url      = env("DATABASE_URL")
}

model Pedido {
  id            String   @id @default(uuid())
  nomeCliente   String
  dataCriacao   DateTime @default(now())
  dataAlteracao DateTime @updatedAt
  Acais         Acai[]

  cupom   Cupom?  @relation(fields: [cupomId], references: [id])
  cupomId String?
}

model PedidoPendente {
  id            String   @id @default(uuid())
  nomeCliente   String
  dataCriacao   DateTime @default(now())
  dataAlteracao DateTime @updatedAt
  Acais         Acai[]

  cupom   Cupom?  @relation(fields: [cupomId], references: [id])
  cupomId String?
}

model Acai {
  id            String      @id @default(uuid())
  nome          String
  dataCriacao   DateTime    @default(now())
  dataAlteracao DateTime    @updatedAt
  adicionais    Adicional[]

  embalagemId      String
  embalagens       Embalagem       @relation(fields: [embalagemId], references: [id])
  pedidoId         String?
  Pedido           Pedido?         @relation(fields: [pedidoId], references: [id])
  PedidoPendente   PedidoPendente? @relation(fields: [pedidoPendenteId], references: [id])
  pedidoPendenteId String?
}

model Cupom {
  id            String   @id @default(uuid())
  codigo        String
  dataCriacao   DateTime @default(now())
  dataExpiracao DateTime

  Pedido         Pedido[]
  PedidoPendente PedidoPendente[]
}

model Embalagem {
  id            String   @id @default(uuid())
  nome          String
  dataCriacao   DateTime @default(now())
  dataAlteracao DateTime @updatedAt
  categoria     String
  tamanho       Int
  unidadeMedida String

  Acai Acai[]
}

model Adicional {
  id            String   @id @default(uuid())
  dataCriacao   DateTime @default(now())
  dataAlteracao DateTime @updatedAt
  nome          String
  categoria     String
  preco         Float

  acaiId String?
  Acai   Acai?   @relation(fields: [acaiId], references: [id])
}
